digraph LogicFlow {
  rankdir=TB;
  splines=ortho;
  node [fontname="Courier New", shape=box, style=filled, fillcolor=white];
  edge [fontname="Arial", fontsize=10];
  block_1 [label="def main\n(程序主入口：负责参数解析与调度)", shape=box];
  exit_2 [label="return/exit", shape=doublecircle, fillcolor="#F8D7DA", color="#DC3545"];
  block_3 [label="config = ConfigLoader(\"logic_config.y...", shape=box];
  block_4 [label="parser = argparse.ArgumentParser(", shape=box];
  call_5 [label="parser.add_argument()", shape=ellipse, fillcolor="#E2E3E5"];
  call_6 [label="parser.add_argument()", shape=ellipse, fillcolor="#E2E3E5"];
  call_7 [label="parser.add_argument()", shape=ellipse, fillcolor="#E2E3E5"];
  call_8 [label="parser.add_argument()", shape=ellipse, fillcolor="#E2E3E5"];
  call_9 [label="parser.add_argument()", shape=ellipse, fillcolor="#E2E3E5"];
  block_10 [label="args = parser.parse_args()", shape=box];
  fork_11 [label="if args.config != \"logic_config.yaml\"", shape=diamond, fillcolor="#FFF3CD"];
  virtual_12 [label="True", style="dashed,filled"];
  block_13 [label="config = ConfigLoader(args.config)", shape=box];
  join_14 [label="fi", shape=point, width=0.1];
  block_15 [label="file_path = os.path.abspath(args.file)", shape=box];
  fork_16 [label="if not os.path.exists(file_path)", shape=diamond, fillcolor="#FFF3CD"];
  virtual_17 [label="True", style="dashed,filled"];
  call_18 [label="print()", shape=ellipse, fillcolor="#E2E3E5"];
  call_19 [label="sys.exit()", shape=ellipse, fillcolor="#E2E3E5"];
  join_20 [label="fi", shape=point, width=0.1];
  call_21 [label="print()", shape=ellipse, fillcolor="#E2E3E5"];
  virtual_22 [label="try scope", style="dashed,filled"];
  block_23 [label="engine = ASTEngine()", shape=box];
  block_24 [label="tree, code_bytes = engine.parse_file(...", shape=box];
  block_25 [label="except", shape=box];
  join_26 [label="end try", shape=point, width=0.1];
  block_27 [label="target_node = None", shape=box];
  block_28 [label="root = tree.root_node", shape=box];
  block_29 [label="functions = []", shape=box];
  block_30 [label="ext = file_path.split(\".\")[-1].lower()", shape=box];
  block_31 [label="def find_functions(node, lang_type):", shape=box];
  block_32 [label="builder = None", shape=box];
  fork_33 [label="if ext == \"rs\"", shape=diamond, fillcolor="#FFF3CD"];
  virtual_34 [label="True", style="dashed,filled"];
  block_35 [label="builder = RustCFGBuilder(code_bytes)", shape=box];
  block_36 [label="functions = find_functions(root, \"rs\")", shape=box];
  virtual_37 [label="False", style="dashed,filled"];
  fork_38 [label="elif ext == \"py\"", shape=diamond, fillcolor="#FFF3CD"];
  virtual_39 [label="True", style="dashed,filled"];
  block_40 [label="builder = PythonCFGBuilder(code_bytes)", shape=box];
  block_41 [label="functions = find_functions(root, \"py\")", shape=box];
  join_42 [label="fi", shape=point, width=0.1];
  fork_43 [label="if hasattr(builder, \"set_config_loader\")", shape=diamond, fillcolor="#FFF3CD"];
  virtual_44 [label="True", style="dashed,filled"];
  call_45 [label="builder.set_config_loader()", shape=ellipse, fillcolor="#E2E3E5"];
  join_46 [label="fi", shape=point, width=0.1];
  fork_47 [label="if not functions", shape=diamond, fillcolor="#FFF3CD"];
  virtual_48 [label="True", style="dashed,filled"];
  call_49 [label="print()", shape=ellipse, fillcolor="#E2E3E5"];
  call_50 [label="sys.exit()", shape=ellipse, fillcolor="#E2E3E5"];
  join_51 [label="fi", shape=point, width=0.1];
  fork_52 [label="if args.focus", shape=diamond, fillcolor="#FFF3CD"];
  virtual_53 [label="True", style="dashed,filled"];
  fork_54 [label="for fn in ...", shape=diamond, fillcolor="#FFF3CD"];
  join_55 [label="end loop", shape=point, width=0.1];
  virtual_56 [label="Body", style="dashed,filled"];
  block_57 [label="name_node = fn.child_by_field_name(\"n...", shape=box];
  block_58 [label="name = code_bytes[name_node.start_byt...", shape=box];
  fork_59 [label="if name == args.focus", shape=diamond, fillcolor="#FFF3CD"];
  virtual_60 [label="True", style="dashed,filled"];
  block_61 [label="target_node = fn", shape=box];
  join_62 [label="fi", shape=point, width=0.1];
  fork_63 [label="if not target_node", shape=diamond, fillcolor="#FFF3CD"];
  virtual_64 [label="True", style="dashed,filled"];
  call_65 [label="print()", shape=ellipse, fillcolor="#E2E3E5"];
  call_66 [label="sys.exit()", shape=ellipse, fillcolor="#E2E3E5"];
  join_67 [label="fi", shape=point, width=0.1];
  virtual_68 [label="False", style="dashed,filled"];
  call_69 [label="print()", shape=ellipse, fillcolor="#E2E3E5"];
  block_70 [label="target_node = functions[0]", shape=box];
  join_71 [label="fi", shape=point, width=0.1];
  block_72 [label="ulg = builder.build_from_function(tar...", shape=box];
  block_73 [label="base_name = os.path.splitext(file_pat...", shape=box];
  block_74 [label="filename = os.path.basename(base_name)", shape=box];
  block_75 [label="output_dir = f\"{base_name}_logic\"", shape=box];
  fork_76 [label="if not os.path.exists(output_dir)", shape=diamond, fillcolor="#FFF3CD"];
  virtual_77 [label="True", style="dashed,filled"];
  call_78 [label="os.makedirs()", shape=ellipse, fillcolor="#E2E3E5"];
  join_79 [label="fi", shape=point, width=0.1];
  fork_80 [label="if args.format in [\"dsl\", \"both\"]", shape=diamond, fillcolor="#FFF3CD"];
  virtual_81 [label="True", style="dashed,filled"];
  block_82 [label="dsl_out = DSLRenderer(ulg).render()", shape=box];
  block_83 [label="dsl_path = os.path.join(output_dir, f...", shape=box];
  call_84 [label="with ...", shape=ellipse, fillcolor="#E2E3E5"];
  call_85 [label="f.write()", shape=ellipse, fillcolor="#E2E3E5"];
  virtual_86 [label="__exit__", style="dashed,filled"];
  call_87 [label="print()", shape=ellipse, fillcolor="#E2E3E5"];
  join_88 [label="fi", shape=point, width=0.1];
  fork_89 [label="if args.format in [\"svg\", \"both\"]", shape=diamond, fillcolor="#FFF3CD"];
  virtual_90 [label="True", style="dashed,filled"];
  block_91 [label="dot_out = DotRenderer(ulg).render()", shape=box];
  block_92 [label="dot_path = os.path.join(output_dir, f...", shape=box];
  fork_93 [label="if args.svg_dir", shape=diamond, fillcolor="#FFF3CD"];
  virtual_94 [label="True", style="dashed,filled"];
  fork_95 [label="if not os.path.exists(args.svg_dir)", shape=diamond, fillcolor="#FFF3CD"];
  virtual_96 [label="True", style="dashed,filled"];
  call_97 [label="os.makedirs()", shape=ellipse, fillcolor="#E2E3E5"];
  join_98 [label="fi", shape=point, width=0.1];
  block_99 [label="svg_path = os.path.join(args.svg_dir,...", shape=box];
  virtual_100 [label="False", style="dashed,filled"];
  block_101 [label="svg_path = os.path.join(output_dir, f...", shape=box];
  join_102 [label="fi", shape=point, width=0.1];
  call_103 [label="with ...", shape=ellipse, fillcolor="#E2E3E5"];
  call_104 [label="f.write()", shape=ellipse, fillcolor="#E2E3E5"];
  virtual_105 [label="__exit__", style="dashed,filled"];
  virtual_106 [label="try scope", style="dashed,filled"];
  block_107 [label="import subprocess", shape=box];
  call_108 [label="subprocess.run()", shape=ellipse, fillcolor="#E2E3E5"];
  call_109 [label="print()", shape=ellipse, fillcolor="#E2E3E5"];
  block_110 [label="except", shape=box];
  block_111 [label="except", shape=box];
  join_112 [label="end try", shape=point, width=0.1];
  join_113 [label="fi", shape=point, width=0.1];
  block_1 -> block_3 [color="black"];
  block_3 -> block_4 [color="black"];
  block_4 -> call_5 [color="black"];
  call_5 -> call_6 [color="black"];
  call_6 -> call_7 [color="black"];
  call_7 -> call_8 [color="black"];
  call_8 -> call_9 [color="black"];
  call_9 -> block_10 [color="black"];
  block_10 -> fork_11 [color="black"];
  fork_11 -> virtual_12 [label="True", color="#198754", fontcolor="#198754"];
  fork_11 -> join_14 [label="False", color="#FD7E14", fontcolor="#FD7E14"];
  virtual_12 -> block_13 [color="black"];
  block_13 -> join_14 [color="black"];
  join_14 -> block_15 [color="black"];
  block_15 -> fork_16 [color="black"];
  fork_16 -> virtual_17 [label="True", color="#198754", fontcolor="#198754"];
  fork_16 -> join_20 [label="False", color="#FD7E14", fontcolor="#FD7E14"];
  virtual_17 -> call_18 [color="black"];
  call_18 -> call_19 [color="black"];
  call_19 -> join_20 [color="black"];
  join_20 -> call_21 [color="black"];
  call_21 -> virtual_22 [color="black"];
  virtual_22 -> block_23 [color="black"];
  virtual_22 -> block_25 [label="Ex", color="#DC3545", style="dashed"];
  block_23 -> block_24 [color="black"];
  block_24 -> join_26 [color="black"];
  block_25 -> join_26 [color="black"];
  join_26 -> block_27 [color="black"];
  block_27 -> block_28 [color="black"];
  block_28 -> block_29 [color="black"];
  block_29 -> block_30 [color="black"];
  block_30 -> block_31 [color="black"];
  block_31 -> block_32 [color="black"];
  block_32 -> fork_33 [color="black"];
  fork_33 -> virtual_34 [label="True", color="#198754", fontcolor="#198754"];
  fork_33 -> virtual_37 [label="False", color="#FD7E14", fontcolor="#FD7E14"];
  virtual_34 -> block_35 [color="black"];
  block_35 -> block_36 [color="black"];
  block_36 -> join_42 [color="black"];
  virtual_37 -> fork_38 [color="black"];
  fork_38 -> virtual_39 [label="True", color="#198754", fontcolor="#198754"];
  virtual_39 -> block_40 [color="black"];
  block_40 -> block_41 [color="black"];
  block_41 -> join_42 [color="black"];
  join_42 -> fork_43 [color="black"];
  fork_43 -> virtual_44 [label="True", color="#198754", fontcolor="#198754"];
  fork_43 -> join_46 [label="False", color="#FD7E14", fontcolor="#FD7E14"];
  virtual_44 -> call_45 [color="black"];
  call_45 -> join_46 [color="black"];
  join_46 -> fork_47 [color="black"];
  fork_47 -> virtual_48 [label="True", color="#198754", fontcolor="#198754"];
  fork_47 -> join_51 [label="False", color="#FD7E14", fontcolor="#FD7E14"];
  virtual_48 -> call_49 [color="black"];
  call_49 -> call_50 [color="black"];
  call_50 -> join_51 [color="black"];
  join_51 -> fork_52 [color="black"];
  fork_52 -> virtual_53 [label="True", color="#198754", fontcolor="#198754"];
  fork_52 -> virtual_68 [label="False", color="#FD7E14", fontcolor="#FD7E14"];
  virtual_53 -> fork_54 [color="black"];
  fork_54 -> virtual_56 [label="True", color="#198754", fontcolor="#198754"];
  fork_54 -> join_55 [label="Done", color="#FD7E14", fontcolor="#FD7E14"];
  join_55 -> fork_63 [color="black"];
  virtual_56 -> block_57 [color="black"];
  block_57 -> block_58 [color="black"];
  block_58 -> fork_59 [color="black"];
  fork_59 -> virtual_60 [label="True", color="#198754", fontcolor="#198754"];
  fork_59 -> join_62 [label="False", color="#FD7E14", fontcolor="#FD7E14"];
  virtual_60 -> block_61 [color="black"];
  block_61 -> join_55 [label="break", color="#6C757D", constraint=false];
  join_62 -> fork_54 [label="repeat", color="#6C757D", constraint=false];
  fork_63 -> virtual_64 [label="True", color="#198754", fontcolor="#198754"];
  fork_63 -> join_67 [label="False", color="#FD7E14", fontcolor="#FD7E14"];
  virtual_64 -> call_65 [color="black"];
  call_65 -> call_66 [color="black"];
  call_66 -> join_67 [color="black"];
  join_67 -> join_71 [color="black"];
  virtual_68 -> call_69 [color="black"];
  call_69 -> block_70 [color="black"];
  block_70 -> join_71 [color="black"];
  join_71 -> block_72 [color="black"];
  block_72 -> block_73 [color="black"];
  block_73 -> block_74 [color="black"];
  block_74 -> block_75 [color="black"];
  block_75 -> fork_76 [color="black"];
  fork_76 -> virtual_77 [label="True", color="#198754", fontcolor="#198754"];
  fork_76 -> join_79 [label="False", color="#FD7E14", fontcolor="#FD7E14"];
  virtual_77 -> call_78 [color="black"];
  call_78 -> join_79 [color="black"];
  join_79 -> fork_80 [color="black"];
  fork_80 -> virtual_81 [label="True", color="#198754", fontcolor="#198754"];
  fork_80 -> join_88 [label="False", color="#FD7E14", fontcolor="#FD7E14"];
  virtual_81 -> block_82 [color="black"];
  block_82 -> block_83 [color="black"];
  block_83 -> call_84 [color="black"];
  call_84 -> call_85 [color="black"];
  call_85 -> virtual_86 [color="black"];
  virtual_86 -> call_87 [color="black"];
  call_87 -> join_88 [color="black"];
  join_88 -> fork_89 [color="black"];
  fork_89 -> virtual_90 [label="True", color="#198754", fontcolor="#198754"];
  fork_89 -> join_113 [label="False", color="#FD7E14", fontcolor="#FD7E14"];
  virtual_90 -> block_91 [color="black"];
  block_91 -> block_92 [color="black"];
  block_92 -> fork_93 [color="black"];
  fork_93 -> virtual_94 [label="True", color="#198754", fontcolor="#198754"];
  fork_93 -> virtual_100 [label="False", color="#FD7E14", fontcolor="#FD7E14"];
  virtual_94 -> fork_95 [color="black"];
  fork_95 -> virtual_96 [label="True", color="#198754", fontcolor="#198754"];
  fork_95 -> join_98 [label="False", color="#FD7E14", fontcolor="#FD7E14"];
  virtual_96 -> call_97 [color="black"];
  call_97 -> join_98 [color="black"];
  join_98 -> block_99 [color="black"];
  block_99 -> join_102 [color="black"];
  virtual_100 -> block_101 [color="black"];
  block_101 -> join_102 [color="black"];
  join_102 -> call_103 [color="black"];
  call_103 -> call_104 [color="black"];
  call_104 -> virtual_105 [color="black"];
  virtual_105 -> virtual_106 [color="black"];
  virtual_106 -> block_107 [color="black"];
  virtual_106 -> block_110 [label="Ex", color="#DC3545", style="dashed"];
  virtual_106 -> block_111 [label="Ex", color="#DC3545", style="dashed"];
  block_107 -> call_108 [color="black"];
  call_108 -> call_109 [color="black"];
  call_109 -> join_112 [color="black"];
  block_110 -> join_112 [color="black"];
  block_111 -> join_112 [color="black"];
  join_112 -> join_113 [color="black"];
  join_113 -> exit_2 [color="black"];
}